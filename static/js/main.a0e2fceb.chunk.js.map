{"version":3,"sources":["Components/Button.js","Components/Footer.js","Components/Color-Dot.js","Components/Form.js","Components/Mapbox.js","firebase.js","App.js","serviceWorker.js","index.js"],"names":["Button","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","borderColor","color","hover","bind","assertThisInitialized","isHover","setState","hoverColor","_this2","react_default","a","createElement","className","concat","onMouseEnter","onMouseLeave","style","onClick","text","Component","Footer","href","ColorDot","backgroundColor","getRandomInt","min","max","Math","ceil","floor","random","Form","location","panel","alpha","hasError","panelFocus","React","createRef","toggleLocation","colorChooser","randomColor","submitForm","formInput","navigator","geolocation","getCurrentPosition","position","latitude","round","coords","longitude","key","replace","geoFireRef","set","closeForm","err","includes","code","console","log","warn","message","_this3","lib","ref","enableAlpha","onBlur","onChange","Button_Button","es","action","popup","destroyPopupOnHide","popupAlign","points","offset","overflow","adjustX","adjustY","Color_Dot_ColorDot","_this4","isActive","getNewLayer","id","type","source","paint","circle-radius","stops","circle-color","circle-opacity","Mapbox","makePoints","mapboxgl","accessToken","map","Map","container","mapContainer","zoom","minZoom","center","window","hash","length","userlocation","GeolocateControl","positionOptions","enableHighAccuracy","trackUserLocation","addControl","getElementsByClassName","remove","firebaseRef","GeoFire","getCenter","corner","getBounds","_ne","distance","lat","lng","query","radius","on","customData","getSource","getLayer","addSource","data","features","geometry","coordinates","addLayer","child","removeLayer","val","updateCriteria","removeSource","off","top","bottom","width","el","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","database","App","formActive","disableGeolocation","geoFire","toggleForm","hasGeolocation","value","Mapbox_Mapbox","Footer_Footer","Form_Form","Boolean","hostname","match","ReactDOM","render","src_App","document","getElementById","serviceWorker","ready","then","registration","unregister"],"mappings":"2XAGqBA,sBACnB,SAAAA,EAAYC,GAAM,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAL,IAChBE,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAH,GAAAQ,KAAAH,KAAMJ,KACDQ,MAAQ,CACXC,YAAaR,EAAKD,MAAMU,MACxBA,MAAOT,EAAKD,MAAMU,OAEpBT,EAAKU,MAAQV,EAAKU,MAAMC,KAAXV,OAAAW,EAAA,EAAAX,CAAAD,IANGA,qEASZa,GACDA,EACDV,KAAKW,SAAS,CACZN,YAAaL,KAAKJ,MAAMgB,WACxBN,MAAON,KAAKJ,MAAMgB,aAItBZ,KAAKW,SAAS,CACZN,YAAaL,KAAKJ,MAAMU,MACxBA,MAAON,KAAKJ,MAAMU,yCAId,IAAAO,EAAAb,KAEN,OACEc,EAAAC,EAAAC,cAAA,OACAC,UAAS,UAAAC,OAAYlB,KAAKJ,MAAMqB,WAAa,IAC7CE,aAAc,kBAAIN,EAAKN,OAAM,IAC7Ba,aAAc,kBAAIP,EAAKN,OAAM,IAC7Bc,MAAOrB,KAAKI,MACZkB,QAAStB,KAAKJ,MAAM0B,SACjBtB,KAAKJ,MAAM2B,aAjCgBC,cCAfC,2LAEjB,OACEX,EAAAC,EAAAC,cAAA,cACEF,EAAAC,EAAAC,cAAA,KAAGU,KAAK,gDAAR,kBAJ4BF,cCAfG,kMAEjB,IAAMN,EAAQ,CACZO,gBAAiB5B,KAAKJ,MAAMU,OAE9B,OACEQ,EAAAC,EAAAC,cAAA,OAAKC,UAAU,YAAYI,MAAOA,WANFG,sCCMtC,SAASK,EAAaC,EAAKC,GAGzB,OAFAD,EAAME,KAAKC,KAAKH,GAChBC,EAAMC,KAAKE,MAAMH,GACVC,KAAKE,MAAMF,KAAKG,UAAYJ,EAAMD,IAAQA,MAG9BM,cACnB,SAAAA,EAAYxC,GAAM,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAoC,IAChBvC,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAsC,GAAAjC,KAAAH,KAAMJ,KACDQ,MAAQ,CACXiC,UAAU,EACVC,OAAO,EACPhC,MAAO,CACLA,MAAK,OAAAY,OAASW,EAAa,EAAG,KAAzB,MAAAX,OAAkCW,EAAa,EAAG,KAAlD,MAAAX,OAA2DW,EAAa,EAAG,KAA3E,KACLU,MAAO,KAETC,SAAU,MAEZ3C,EAAK4C,WAAaC,IAAMC,YACxB9C,EAAK+C,eAAiB/C,EAAK+C,eAAepC,KAApBV,OAAAW,EAAA,EAAAX,CAAAD,IACtBA,EAAKgD,aAAehD,EAAKgD,aAAarC,KAAlBV,OAAAW,EAAA,EAAAX,CAAAD,IACpBA,EAAKiD,YAAcjD,EAAKiD,YAAYtC,KAAjBV,OAAAW,EAAA,EAAAX,CAAAD,IACnBA,EAAKkD,WAAalD,EAAKkD,WAAWvC,KAAhBV,OAAAW,EAAA,EAAAX,CAAAD,IAClBA,EAAKmD,UAAYnD,EAAKmD,UAAUxC,KAAfV,OAAAW,EAAA,EAAAX,CAAAD,IAhBDA,gFAoBhBG,KAAKW,SAAS,CAAE0B,UAAWrC,KAAKI,MAAMiC,gDAG3B/B,GACXN,KAAKW,SAAS,CAACL,MAAOA,0CAItBN,KAAKW,SAAS,CACZL,MAAO,CACLA,MAAK,OAAAY,OAASW,EAAa,EAAG,KAAzB,MAAAX,OAAkCW,EAAa,EAAG,KAAlD,MAAAX,OAA2DW,EAAa,EAAG,KAA3E,KACLU,MAAO,4CAKD,IAAA1B,EAAAb,KAiBViD,UAAUC,YAAYC,mBAhBN,SAACC,GAEf,IAAMC,EAAWrB,KAAKsB,MAAiC,IAA3BF,EAASG,OAAOF,UAAoB,IAC1DG,EAAYxB,KAAKsB,MAAkC,IAA5BF,EAASG,OAAOC,WAAqB,IAC5DC,EAAM,GAAAvC,OAAGmC,EAAH,KAAAnC,OAAesC,GAAYE,QAAQ,MAAO,KACtD7C,EAAKjB,MAAM+D,WAAWC,IAAIH,EAAK,CAACJ,EAAUG,GAAY,CAAClD,MAAOO,EAAKT,MAAME,MAAMA,QAC/EO,EAAKjB,MAAMiE,WAAU,IAET,SAACC,GACb,GAAG,CAAC,EAAE,GAAGC,SAASD,EAAIE,MAGpB,OAFAC,QAAQC,IAAI,4BACZrD,EAAKF,SAAS,CAAC6B,SAAUsB,IAG3BG,QAAQE,KAAR,SAAAjD,OAAsB4C,EAAIE,KAA1B,OAAA9C,OAAoC4C,EAAIM,8CAKlC5B,GAAS,IAAA6B,EAAArE,KACXsC,EAASxB,EAAAC,EAAAC,cAACsD,EAAA,MAAD,CACbC,IAAKvE,KAAKyC,WACVxB,UAAWjB,KAAKI,MAAMkC,MAAQ,OAAS,QACvCkC,aAAa,EACblE,MAAON,KAAKI,MAAME,MAAMA,MACxBmE,OAAQ,WAAKJ,EAAK1D,SAAS,CAAC2B,OAAO,KACnCoC,SAAU1E,KAAK6C,eACjB,OAAIL,EAEA1B,EAAAC,EAAAC,cAAA,OAAKC,UAAU,SACbH,EAAAC,EAAAC,cAAA,KAAGU,KAAK,yCACNZ,EAAAC,EAAAC,cAAA,QAAMC,UAAU,cAAhB,SAAoCjB,KAAKI,MAAMoC,SAASwB,MAD1D,KACyEhE,KAAKI,MAAMoC,SAAS4B,SAE7FtD,EAAAC,EAAAC,cAAC2D,EAAD,CACErD,QAAStB,KAAKJ,MAAMiE,UACpBtC,KAAK,SACLjB,MAAM,eACNM,WAAW,iBAKjBE,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAC4D,EAAA,QAAD,CACE3D,UAAU,UACV4D,OAAQ,CAAC,SACTC,MAAOxC,EACPyC,oBAAkB,EAClBC,WAAY,CACVC,OAAQ,CAAC,KAAM,MACfC,OAAQ,CAAC,IAAK,KACdC,SAAU,CAAEC,SAAS,EAAOC,SAAS,KAEvCvE,EAAAC,EAAAC,cAAA,OAAKC,UAAU,QAAQI,MAAO,CAAChB,YAAaL,KAAKI,MAAME,MAAMA,MAAOA,MAAON,KAAKI,MAAME,MAAMA,QAC1FQ,EAAAC,EAAAC,cAACsE,EAAD,CAAUhF,MAAON,KAAKI,MAAME,MAAMA,QADpC,mBAIFQ,EAAAC,EAAAC,cAAC2D,EAAD,CACErD,QAAStB,KAAK8C,YACd7B,UAAU,SACVM,KAAK,eACLjB,MAAM,UACNM,WAAW,oBACbE,EAAAC,EAAAC,cAAA,OAAKC,UAAU,kBACbH,EAAAC,EAAAC,cAAC2D,EAAD,CACErD,QAAStB,KAAK+C,WACdxB,KAAK,SACLjB,MAAM,eACNM,WAAW,gBACbE,EAAAC,EAAAC,cAAC2D,EAAD,CACErD,QAAStB,KAAKJ,MAAMiE,UACpBtC,KAAK,SACLjB,MAAM,eACNM,WAAW,mDAMb,IAAA2E,EAAAvF,KACN,OACEc,EAAAC,EAAAC,cAAA,OAAKC,UAAS,gBAAAC,OAAkBlB,KAAKJ,MAAM4F,SAAW,SAAU,KAC7DxF,KAAKJ,MAAM4F,SAAY1E,EAAAC,EAAAC,cAAA,OAAKC,UAAU,aAAaK,QAAS,WAAKiE,EAAK3F,MAAMiE,WAAU,MAAmB,GAC1G/C,EAAAC,EAAAC,cAAA,OAAKC,UAAU,QACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,SAAf,aACAH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,iBACZjB,KAAKgD,UAAUhD,KAAKI,MAAMoC,oBA5HLhB,qCCVlC,SAASiE,EAAYhC,EAAKnD,GACxB,MACE,CACEoF,GAAMjC,EACNkC,KAAQ,SACRC,OAAUnC,EACVoC,MAAS,CACPC,gBAAiB,CACfC,MAAS,CACP,CAAC,EAAG,GACJ,CAAC,EAAG,KAGRC,eAAgB1F,EAChB2F,iBAAkB,SAOLC,cACnB,SAAAA,EAAYtG,GAAM,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAkG,IAChBrG,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAoG,GAAA/F,KAAAH,KAAMJ,KACDuG,WAAatG,EAAKsG,WAAW3F,KAAhBV,OAAAW,EAAA,EAAAX,CAAAD,IAFFA,mFAMhBuG,IAASC,YAAc,oGACvBrG,KAAKsG,IAAM,IAAIF,IAASG,IAAI,CAC1BC,UAAWxG,KAAKyG,aAChBpF,MAAO,0DACPqF,KAAM,EACNC,QAAS,EACTC,OAAwC,IAAhCC,OAAOxE,SAASyE,KAAKC,OAAe,EAAE,QAAQ,OAAS,GAC/DD,MAAM,IAER,IAAME,EAAe,IAAIZ,IAASa,iBAAiB,CACjDC,gBAAiB,CACfC,oBAAoB,GAEtBC,mBAAmB,IAErBpH,KAAKsG,IAAIe,WAAWL,GACpB/C,QAAQC,IAAI,YAAalE,KAAKyG,aAAaa,uBAAuB,mEAIlEtH,KAAKsG,IAAIiB,4CAIAC,EAAa7D,EAAY8D,GAAQ,IAAA5G,EAAAb,KAE1C,GAAIwH,GAAgB7D,GAAe8D,GAAYzH,KAAKsG,IAApD,CAGA,IAAIM,EAAS5G,KAAKsG,IAAIoB,YAClBC,EAAS3H,KAAKsG,IAAIsB,YAAYC,IAC9BC,EAAWL,EAAQK,SAAS,CAAClB,EAAOmB,IAAKnB,EAAOoB,KAAM,CAACL,EAAOI,IAAKJ,EAAOK,MAExEC,EAAQtE,EAAWsE,MAAM,CAC7BrB,OAAQ,CAACA,EAAOmB,IAAKnB,EAAOoB,KAC5BE,OAAQJ,IAIV9H,KAAKsG,IAAI6B,GAAG,OAAQ,WAClBF,EAAME,GAAG,cAAe,SAAC1E,EAAKpB,EAAUyF,EAAUM,GAE7CvH,EAAKyF,IAAI+B,UAAU5E,IAAQ5C,EAAKyF,IAAIgC,SAAS7E,KAChD5C,EAAKyF,IAAIiC,UAAU9E,EAAK,CACtBkC,KAAQ,UACR6C,KAAQ,CACN7C,KAAQ,oBACR8C,SAAY,CAAC,CACX9C,KAAQ,UACR+C,SAAY,CACV/C,KAAQ,QACRgD,YAAe,CAACtG,EAAS,GAAIA,EAAS,UAM9CxB,EAAKyF,IAAIsC,SAASnD,EAAYhC,EAAK2E,EAAW9H,QAG9CkH,EAAYqB,MAAMpF,GAAK0E,GAAG,gBAAiB,SAACpH,GAC1CF,EAAKyF,IAAIwC,YAAYrF,GACrB5C,EAAKyF,IAAIsC,SAASnD,EAAYhC,EAAK1C,EAAEgI,aAKzClI,EAAKyF,IAAI6B,GAAG,UAAW,WACrBvB,EAAS/F,EAAKyF,IAAIoB,YAClBC,EAAS9G,EAAKyF,IAAIsB,YAAYC,IAC9BC,EAAWL,EAAQK,SAAS,CAAClB,EAAOmB,IAAKnB,EAAOoB,KAAM,CAACL,EAAOI,IAAKJ,EAAOK,MAC1EC,EAAMe,eAAe,CACnBpC,OAAQ,CAACA,EAAOmB,IAAKnB,EAAOoB,KAC5BE,OAAQJ,MAIZG,EAAME,GAAG,aAAc,SAAC1E,EAAKpB,EAAUyF,EAAUM,IAE3CvH,EAAKyF,IAAI+B,UAAU5E,IAAS5C,EAAKyF,IAAIgC,SAAS7E,MAClD5C,EAAKyF,IAAIwC,YAAYrF,GACrB5C,EAAKyF,IAAI2C,aAAaxF,GACtB+D,EAAYqB,MAAMpF,GAAKyF,IAAI,wDAMxB,IAAA7E,EAAArE,KAQP,OADAA,KAAKmG,WAAWnG,KAAKJ,MAAM4H,YAAaxH,KAAKJ,MAAM+D,WAAY3D,KAAKJ,MAAM6H,SACnE3G,EAAAC,EAAAC,cAAA,OAAKK,MAPE,CACZ+B,SAAU,WACV+F,IAAK,EACLC,OAAQ,EACRC,MAAO,QAGiB9E,IAAK,SAAA+E,GAAE,OAAIjF,EAAKoC,aAAe6C,YAvGzB9H,uCCfpC+H,IAASC,cATI,CACTC,OAAQ,0CACRC,WAAY,6BACZC,YAAa,oCACbC,UAAW,aACXC,cAAe,yBACfC,kBAAmB,iBAIRP,QAAf,mBCFM/B,EAAc+B,EAASQ,WAAWxF,IAAI,UACtCZ,EAAa,IAAI8D,IAAQD,GAoDhBwC,cAjDb,SAAAA,EAAYpK,GAAM,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAgK,IAChBnK,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAkK,GAAA7J,KAAAH,KAAMJ,KACDQ,MAAQ,CACX6J,YAAY,EACZC,oBAAoB,EACpB1C,YAAa,KACb2C,QAAS,KACT1C,QAASA,KAEX5H,EAAKuK,WAAavK,EAAKuK,WAAW5J,KAAhBV,OAAAW,EAAA,EAAAX,CAAAD,IATFA,mFAahBG,KAAKW,SAAS,CACZ6G,YAAaA,EACb7D,WAAYA,EACZ0G,eAAiB,gBAAiBpH,+CAK3BqH,GACT,IAAIL,EAA6B,kBAATK,EAAqBA,GAAStK,KAAKI,MAAM6J,WACjEjK,KAAKW,SAAS,CAACsJ,WAAYA,qCAGpB,IAAApJ,EAAAb,KACP,OACEc,EAAAC,EAAAC,cAAA,OAAKC,UAAU,OACbH,EAAAC,EAAAC,cAACuJ,EAAD,CACE9C,QAASzH,KAAKI,MAAMqH,QACpBD,YAAaxH,KAAKI,MAAMoH,YACxB7D,WAAY3D,KAAKI,MAAMuD,aACzB7C,EAAAC,EAAAC,cAAC2D,EAAD,CACE1D,UAAW,WACXK,QAAStB,KAAKoK,WACd9J,MAAO,UACPM,WAAY,kBACZW,KAAM,cACRT,EAAAC,EAAAC,cAACwJ,EAAD,MACA1J,EAAAC,EAAAC,cAACyJ,EAAD,CACE9G,WAAY3D,KAAKI,MAAMuD,WACvB6D,YAAaxH,KAAKI,MAAMoH,YACxB3D,UAAW,WAAKhD,EAAKuJ,YAAW,IAChC5E,SAAUxF,KAAKI,MAAM6J,qBA7CbzI,aCDEkJ,QACW,cAA7B7D,OAAOxE,SAASsI,UAEe,UAA7B9D,OAAOxE,SAASsI,UAEhB9D,OAAOxE,SAASsI,SAASC,MACvB,2DCZNC,IAASC,OAAOhK,EAAAC,EAAAC,cAAC+J,EAAD,MAASC,SAASC,eAAe,SD2H3C,kBAAmBhI,WACrBA,UAAUiI,cAAcC,MAAMC,KAAK,SAAAC,GACjCA,EAAaC","file":"static/js/main.a0e2fceb.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport '../Styles/Button.css';\n\nexport default class Button extends Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      borderColor: this.props.color,\n      color: this.props.color\n    }\n    this.hover = this.hover.bind(this);\n  }\n\n  hover(isHover){\n    if(isHover){\n      this.setState({\n        borderColor: this.props.hoverColor,\n        color: this.props.hoverColor\n      });\n      return\n    }\n    this.setState({\n      borderColor: this.props.color,\n      color: this.props.color\n    });\n  }\n\n  render(){\n\n    return(\n      <div\n      className={`Button ${this.props.className || ''}`}\n      onMouseEnter={()=>this.hover(true)}\n      onMouseLeave={()=>this.hover(false)}\n      style={this.state}\n      onClick={this.props.onClick}>\n        {this.props.text}\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport '../Styles/Footer.css';\n\nexport default class Footer extends Component {\n  render(){\n    return(\n      <footer>\n        <a href=\"https://github.com/josuerojasrojas/Color-Map\">Source</a>\n      </footer>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport '../Styles/Color-Dot.css'\n\nexport default class ColorDot extends Component {\n  render(){\n    const style = {\n      backgroundColor: this.props.color\n    }\n    return (\n      <div className='Color-Dot' style={style}>\n      </div>\n    )\n  }\n}\n","import React, { Component } from 'react';\nimport '../Styles/Form.css';\nimport Button from './Button';\nimport ColorDot from './Color-Dot';\nimport { Panel } from 'rc-color-picker';\n// trigger is a package used in rc-color-picker\nimport Trigger from 'rc-trigger';\nimport 'rc-color-picker/assets/index.css';\n\nfunction getRandomInt(min, max) {\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(Math.random() * (max - min)) + min; //The maximum is exclusive and the minimum is inclusive\n}\n\nexport default class Form extends Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      location: false,\n      panel: false,\n      color: {\n        color: `rgb(${getRandomInt(0, 256)}, ${getRandomInt(0, 256)}, ${getRandomInt(0, 256)})` ,\n        alpha: 100\n      },\n      hasError: null\n    }\n    this.panelFocus = React.createRef();\n    this.toggleLocation = this.toggleLocation.bind(this);\n    this.colorChooser = this.colorChooser.bind(this);\n    this.randomColor = this.randomColor.bind(this);\n    this.submitForm = this.submitForm.bind(this);\n    this.formInput = this.formInput.bind(this);\n  }\n\n  toggleLocation(){\n    this.setState({ location: !this.state.location });\n  }\n\n  colorChooser(color){\n    this.setState({color: color});\n  }\n\n  randomColor(){\n    this.setState({\n      color: {\n        color: `rgb(${getRandomInt(0, 256)}, ${getRandomInt(0, 256)}, ${getRandomInt(0, 256)})` ,\n        alpha: 100\n      }\n    });\n  }\n\n  submitForm(){\n    const success = (position)=>{\n      // keys might be the same on purpose this is to replace a point that is otherwise going to be directly on top of the other\n      const latitude = Math.round(position.coords.latitude * 10000) / 10000;\n      const longitude = Math.round(position.coords.longitude * 10000) / 10000;\n      const key = `${latitude},${longitude}`.replace(/\\./g, ',');\n      this.props.geoFireRef.set(key, [latitude, longitude], {color: this.state.color.color});\n      this.props.closeForm(false);\n    }\n    const error = (err)=>{\n      if([1,2].includes(err.code)){\n        console.log('cannot get location')\n        this.setState({hasError: err});\n        return\n      }\n      console.warn(`ERROR(${err.code}): ${err.message}`);\n    }\n    navigator.geolocation.getCurrentPosition(success, error);\n  }\n\n  formInput(hasError){\n    const panel = (<Panel\n      ref={this.panelFocus}\n      className={this.state.panel ? 'open' : 'close'}\n      enableAlpha={false}\n      color={this.state.color.color}\n      onBlur={()=>{this.setState({panel: false})}}\n      onChange={this.colorChooser}/>);\n    if (hasError) {\n      return (\n        <div className='error'>\n          <a href='http://waziggle.com/BrowserAllow.aspx'>\n            <span className='error-code'>ERROR {this.state.hasError.code}</span>: {this.state.hasError.message}\n          </a>\n          <Button\n            onClick={this.props.closeForm}\n            text='Cancel'\n            color='rgb(198,0,0)'\n            hoverColor='rgb(98,0,0)'/>\n        </div>\n      )\n    }\n    return (\n      <div>\n        <Trigger\n          className=\"trigger\"\n          action={['click']}\n          popup={panel}\n          destroyPopupOnHide\n          popupAlign={{\n            points: ['tl', 'tl'],\n            offset: [50, -100],\n            overflow: { adjustX: false, adjustY: true },\n          }}>\n          <div className='input' style={{borderColor: this.state.color.color, color: this.state.color.color}}>\n            <ColorDot color={this.state.color.color}/> Color Chooser\n          </div>\n        </Trigger>\n        <Button\n          onClick={this.randomColor}\n          className='random'\n          text='Random Color'\n          color='#7b7b7b'\n          hoverColor='rgb(93, 93, 93)'/>\n        <div className='button-wrapper'>\n          <Button\n            onClick={this.submitForm}\n            text='Submit'\n            color='rgb(0,127,0)'\n            hoverColor='rgb(0,80,0)'/>\n          <Button\n            onClick={this.props.closeForm}\n            text='Cancel'\n            color='rgb(198,0,0)'\n            hoverColor='rgb(98,0,0)'/>\n        </div>\n      </div>\n    );\n  }\n\n  render(){\n    return (\n      <div className={`Form-wrapper ${this.props.isActive ? 'active': ''}`}>\n        {this.props.isActive ? (<div className='Form-Shade' onClick={()=>{this.props.closeForm(false)}}></div>) : ''}\n        <div className='Form'>\n          <div className='title'>New Point</div>\n          <div className='input-wrapper'>\n            {this.formInput(this.state.hasError)}\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n","import React, { Component } from 'react';\nimport mapboxgl from 'mapbox-gl';\nimport '../Styles/Map.css';\n\n// some helper functions to clean things out\nfunction getNewLayer(key, color) {\n  return (\n    {\n      \"id\": key,\n      \"type\": \"circle\",\n      \"source\": key,\n      \"paint\": {\n        \"circle-radius\": {\n          \"stops\": [\n            [3, 2],\n            [9, 4]\n          ]\n        },\n        \"circle-color\": color,\n        \"circle-opacity\": .4\n      }\n    }\n  );\n}\n\n// initial code from https://blog.mapbox.com/mapbox-gl-js-react-764da6cc074a\nexport default class Mapbox extends Component {\n  constructor(props){\n    super(props);\n    this.makePoints = this.makePoints.bind(this);\n  }\n\n  componentDidMount() {\n    mapboxgl.accessToken = 'pk.eyJ1Ijoid2l0aGNoZWVzZXBscyIsImEiOiJjam9mNmlubTEwMTYwM3BueGNvbW92cXR5In0.aC-cPbUGitfW_4lrx92KSA';\n    this.map = new mapboxgl.Map({\n      container: this.mapContainer,\n      style: 'mapbox://styles/withcheesepls/cjog1f02r1ds52so0vdjqibye',\n      zoom: 9,\n      minZoom: 3,\n      center: window.location.hash.length === 0 ? [-73.9395,40.79] : [],\n      hash: true\n    });\n    const userlocation = new mapboxgl.GeolocateControl({\n      positionOptions: {\n        enableHighAccuracy: true\n      },\n      trackUserLocation: true\n    });\n    this.map.addControl(userlocation);\n    console.log('component', this.mapContainer.getElementsByClassName('mapboxgl-canary'));\n  }\n\n  componentWillUnmount() {\n    this.map.remove();\n    // TODO: also remove or stop query\n  }\n\n  makePoints(firebaseRef, geoFireRef, GeoFire){\n    // make sure firebase and geofire are loaded to make the queries\n    if(!firebaseRef || !geoFireRef || !GeoFire || !this.map) return\n\n    // get the points of interest (center and a corner is fine)\n    let center = this.map.getCenter();\n    let corner = this.map.getBounds()._ne;\n    let distance = GeoFire.distance([center.lat, center.lng], [corner.lat, corner.lng]);\n    // make the query\n    const query = geoFireRef.query({\n      center: [center.lat, center.lng],\n      radius: distance\n    })\n\n    // then finally check the map is loaded and add each point to the map\n    this.map.on('load', ()=> {\n      query.on(\"key_entered\", (key, location, distance, customData)=>{\n        // TODO: bug where source exist and crashes need to check if getSource and getLayer exist individually (same as line 111)\n        if(this.map.getSource(key) && this.map.getLayer(key)) return;\n        this.map.addSource(key, {\n          \"type\": \"geojson\",\n          \"data\": {\n            \"type\": \"FeatureCollection\",\n            \"features\": [{\n              \"type\": \"Feature\",\n              \"geometry\": {\n                \"type\": \"Point\",\n                \"coordinates\": [location[1], location[0]]\n              }\n            }]\n          }\n        });\n\n        this.map.addLayer(getNewLayer(key, customData.color));\n\n        // ummm the only thing changing should be the color if not then later add error checking\n        firebaseRef.child(key).on('child_changed', (a)=>{\n          this.map.removeLayer(key);\n          this.map.addLayer(getNewLayer(key, a.val()));\n        });\n      });\n\n      // update query to new location\n      this.map.on('moveend', ()=>{\n        center = this.map.getCenter();\n        corner = this.map.getBounds()._ne;\n        distance = GeoFire.distance([center.lat, center.lng], [corner.lat, corner.lng]);\n        query.updateCriteria({\n          center: [center.lat, center.lng],\n          radius: distance\n        });\n      });\n\n      query.on('key_exited', (key, location, distance, customData)=>{\n        // TODO: check the logic before returning\n        if(!this.map.getSource(key) && !this.map.getLayer(key)) return;\n        this.map.removeLayer(key);\n        this.map.removeSource(key);\n        firebaseRef.child(key).off('child_changed')\n      });\n\n    });\n  }\n\n  render() {\n    const style = {\n      position: 'absolute',\n      top: 0,\n      bottom: 0,\n      width: '100%'\n    };\n    this.makePoints(this.props.firebaseRef, this.props.geoFireRef, this.props.GeoFire);\n    return <div style={style} ref={el => this.mapContainer = el} />;\n  }\n}\n","import firebase from 'firebase';\n\nvar config = {\n    apiKey: \"AIzaSyCWMqf2pmYbLYpYu1eohHRs7GueK5jsKcQ\",\n    authDomain: \"color-map1.firebaseapp.com\",\n    databaseURL: \"https://color-map1.firebaseio.com\",\n    projectId: \"color-map1\",\n    storageBucket: \"color-map1.appspot.com\",\n    messagingSenderId: \"129169085202\"\n  };\n\nfirebase.initializeApp(config);\nexport default firebase;\n","import React, { Component } from 'react';\nimport Button from './Components/Button';\nimport Footer from './Components/Footer';\nimport Form from './Components/Form';\nimport Mapbox from './Components/Mapbox';\nimport './Styles/App.css';\nimport firebase from './firebase.js';\n// https://github.com/arnetuk/geofire-js this geofire has support for extra data set (on the package.json i am using my fork cause this one was missing customdata return on event 'key_entered')\nimport GeoFire from 'geofire';\n\nconst firebaseRef = firebase.database().ref('points');\nconst geoFireRef = new GeoFire(firebaseRef);\n\nclass App extends Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      formActive: false,\n      disableGeolocation: false,\n      firebaseRef: null,\n      geoFire: null,\n      GeoFire: GeoFire,\n    }\n    this.toggleForm = this.toggleForm.bind(this);\n  }\n\n  componentDidMount(){\n    this.setState({\n      firebaseRef: firebaseRef,\n      geoFireRef: geoFireRef,\n      hasGeolocation: (\"geolocation\" in navigator),\n    });\n\n  }\n\n  toggleForm(value){\n    let formActive = typeof value == 'boolean' ? value : !this.state.formActive;\n    this.setState({formActive: formActive})\n  }\n\n  render() {\n    return (\n      <div className='app'>\n        <Mapbox\n          GeoFire={this.state.GeoFire}\n          firebaseRef={this.state.firebaseRef}\n          geoFireRef={this.state.geoFireRef} />\n        <Button\n          className={'form-btn'}\n          onClick={this.toggleForm}\n          color={'#7b7b7b'}\n          hoverColor={'rgb(93, 93, 93)'}\n          text={'New Point'}/>\n        <Footer/>\n        <Form\n          geoFireRef={this.state.geoFireRef}\n          firebaseRef={this.state.firebaseRef}\n          closeForm={()=>{this.toggleForm(false)}}\n          isActive={this.state.formActive}/>\n      </div>\n    );\n  }\n}\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './Styles/index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}